!function(t){t.fn.vispan=function(e){return this.each(function(i){function n(){c.frame.stop().animate({scrollTop:0},d.back_to_top_duration)}function s(t){"previous"==t?c.button.previous.stop().animate({left:0},d.button_toggle_duration):"next"==t&&c.button.next.stop().animate({right:0},d.button_toggle_duration)}function o(t){"previous"==t?c.button.previous.stop().animate({left:-(c.button_width+50)},d.button_toggle_duration):"next"==t&&c.button.next.stop().animate({right:-(c.button_width+50)},d.button_toggle_duration)}function r(t){n(),"next"==t?(c.slide.next=c.slide.current.next(".vispan-slide"),c.slide.next.length<=0&&(c.slide.next=c.frame.children(".vispan-slide:first"))):(c.slide.next=c.slide.current.prev(".vispan-slide"),c.slide.next.length<=0&&(c.slide.next=c.frame.children(".vispan-slide:last"))),c.slide.next.addClass("vispan-next"),c.shadow.css("opacity",d.shadow_overlay_opacity).fadeOut(d.slide_change_duration),"next"==t?a=-c.frame.width():a=c.frame.width(),c.slide.current.animate({marginLeft:a},d.slide_change_duration,function(){c.shadow.css("opacity",c.shadow.opacity).show(),c.slide.current.css("marginLeft",0).removeClass("vispan-current"),c.slide.current=c.slide.next,c.slide.current.removeClass("vispan-next").addClass("vispan-current")})}var d=t.extend({scroll_duration:400,back_to_top_duration:1e3,slide_change_duration:500,dead_zone:.1,shadow_overlay_opacity:0,button_toggle_duration:200,refresh_interval:100},e),u=t(this).width();t(this).children().each(function(e){t(this).addClass("vispan-slide").css("width",u),0===e&&t(this).addClass("vispan-current")}),t(this).append('<div class="vispan-shadow"></div>'),t(this).addClass("vispan").wrapInner('<div class="vispan-frame" />').append('<div class="vispan-btn-previous">&lsaquo;</div><div class="vispan-btn-next">&rsaquo;</div>');var l=t(this),h=t(this).children(".vispan-frame:first");h.height(t(this).height());var c=new function(){this.parent=l,this.frame=h,this.frame_top=this.frame.offset().top,this.frame_left=this.frame.offset().left,this.slide={current:this.frame.children(".vispan-current:first")},this.shadow=this.frame.children(".vispan-shadow:first"),this.button={previous:this.parent.children(".vispan-btn-previous:first"),next:this.parent.children(".vispan-btn-next:first"),width:t(".vispan-btn-previous:first").width()},this.wait=!1,this.mouse_x=0,this.mouse_y=0,this.destination={scale:0,px:0}};c.frame.mousemove(function(t){c.wait||(setTimeout(function(){c.wait=!1},d.refresh_interval),c.wait=!0,c.mouse_y=t.pageY,c.mouse_y=t.pageY-c.frame_top-d.dead_zone*c.frame.height(),c.destination.scale=c.mouse_y/(c.frame.height()*(1-2*d.dead_zone)),c.destination.scale<0?c.destination.scale=0:c.destination.scale>1&&(c.destination.scale=1),c.destination.px=c.destination.scale*(c.slide.current.height()-c.frame.height()),c.frame.stop().animate({scrollTop:c.destination.px},d.scroll_duration)),this.mouse_x=t.pageX-c.frame_left,this.mouse_x<=c.button_width+25?s("previous"):o("previous"),this.mouse_x>=c.frame.width()-(c.button_width+25)?s("next"):o("next")}),c.frame.mouseleave(function(){n()}),c.parent.mouseleave(function(){o("next"),o("previous")}),c.button.previous.click(function(t){t.preventDefault(),r("previous")}),c.button.next.click(function(t){t.preventDefault(),r("next")})})}}(jQuery);