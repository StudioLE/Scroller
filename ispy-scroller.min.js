(function(b){b.fn.ispyscroller=function(c){return this.each(function(d){function j(){i.frame.stop().animate({scrollTop:0},e.back_to_top_duration)}function k(a){if(a=="previous"){i.button.previous.stop().animate({left:0},e.button_toggle_duration)}else if(a=="next"){i.button.next.stop().animate({right:0},e.button_toggle_duration)}}function l(a){if(a=="previous"){i.button.previous.stop().animate({left:-(i.button_width+50)},e.button_toggle_duration)}else if(a=="next"){i.button.next.stop().animate({right:-(i.button_width+50)},e.button_toggle_duration)}}function m(b){j();if(b=="next"){i.slide.next=i.slide.current.next(".ispy-scroller-slide");if(i.slide.next.length<=0){i.slide.next=i.frame.children(".ispy-scroller-slide:first")}}else{i.slide.next=i.slide.current.prev(".ispy-scroller-slide");if(i.slide.next.length<=0){i.slide.next=i.frame.children(".ispy-scroller-slide:last")}}i.slide.next.addClass("ispy-scroller-next");i.shadow.css("opacity",e.shadow_overlay_opacity).fadeOut(e.slide_change_duration);if(b=="next"){a=-i.frame.width()}else{a=i.frame.width()}i.slide.current.animate({marginLeft:a},e.slide_change_duration,function(){i.shadow.css("opacity",i.shadow.opacity).show();i.slide.current.css("marginLeft",0).removeClass("ispy-scroller-current");i.slide.current=i.slide.next;i.slide.current.removeClass("ispy-scroller-next").addClass("ispy-scroller-current")})}var e=b.extend({scroll_duration:400,back_to_top_duration:1e3,slide_change_duration:500,dead_zone:.1,shadow_overlay_opacity:0,button_toggle_duration:200,refresh_interval:100},c);var f=b(this).width();b(this).children().each(function(a){b(this).addClass("ispy-scroller-slide").css("width",f);if(a===0){b(this).addClass("ispy-scroller-current")}});b(this).append('<div class="ispy-scroller-shadow"></div>');b(this).addClass("ispy-scroller").wrapInner('<div class="ispy-scroller-frame" />').append('<div class="ispy-scroller-btn-previous">‹</div><div class="ispy-scroller-btn-next">›</div>');var g=b(this);var h=b(this).children(".ispy-scroller-frame:first");h.height(b(this).height());var i=new function(){this.parent=g;this.frame=h;this.frame_top=this.frame.offset().top;this.frame_left=this.frame.offset().left;this.slide={current:this.frame.children(".ispy-scroller-current:first")};this.shadow=this.frame.children(".ispy-scroller-shadow:first");this.button={previous:this.parent.children(".ispy-scroller-btn-previous:first"),next:this.parent.children(".ispy-scroller-btn-next:first"),width:b(".ispy-scroller-btn-previous:first").width()};this.wait=false;this.mouse_x=0;this.mouse_y=0;this.destination={scale:0,px:0}};i.frame.mousemove(function(a){if(!i.wait){setTimeout(function(){i.wait=false},e.refresh_interval);i.wait=true;i.mouse_y=a.pageY;i.mouse_y=a.pageY-i.frame_top-e.dead_zone*i.frame.height();i.destination.scale=i.mouse_y/(i.frame.height()*(1-e.dead_zone*2));if(i.destination.scale<0){i.destination.scale=0}else if(i.destination.scale>1){i.destination.scale=1}i.destination.px=i.destination.scale*(i.slide.current.height()-i.frame.height());i.frame.stop().animate({scrollTop:i.destination.px},e.scroll_duration)}this.mouse_x=a.pageX-i.frame_left;if(this.mouse_x<=i.button_width+25){k("previous")}else{l("previous")}if(this.mouse_x>=i.frame.width()-(i.button_width+25)){k("next")}else{l("next")}});i.frame.mouseleave(function(){j()});i.parent.mouseleave(function(){l("next");l("previous")});i.button.previous.click(function(a){a.preventDefault();m("previous")});i.button.next.click(function(a){a.preventDefault();m("next")})})}})(jQuery)